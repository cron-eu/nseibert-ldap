<html xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
	xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
    data-namespace-typo3-fluid="true">

<f:layout name="Backend"/>

<f:section name="content">

	<be:moduleLayout.button.shortcutButton displayName="{f:translate(id: 'action.updateUsers')}" />
	
	<h1><f:translate key="headline.updateUsers" /></h1>
	
	<f:flashMessages queueIdentifier="ldap" />
	
	<f:comment>
		Settings section
	</f:comment>

	<f:render partial="Module/ConfigLdapAction" arguments="{action: 'doUpdateUsers', formSettings: formSettings, ldapServers: ldapServers}" />
	
	<f:comment>
		Resulting user records
	</f:comment>
	
	<h3><f:translate key="headline.updateResults" /></h3>
	
	<f:if condition="{formSettings.authenticateFe}">
		<div class="userlist">
			<h4><f:translate key="headline.fe_users" /></h4>
			<f:widget.paginate objects="{fe_users}" as="paginatedUsers" configuration="{itemsPerPage: 10, insertAbove: 1, insertBelow: 1}">
				<f:render partial="Module/ListTable" arguments="{formSettings: formSettings, users: paginatedUsers, dateFormat: dateFormat, timeFormat: timeFormat, returnUrl: returnUrl}" />
			</f:widget.paginate>
		</div>
	</f:if>
	
	<f:if condition="{formSettings.authenticateBe}">
		<div class="userlist">
			<h4><f:translate key="headline.be_users" /></h4>
			<f:widget.paginate objects="{be_users}" as="paginatedUsers" configuration="{itemsPerPage: 10, insertAbove: 1, insertBelow: 1}">
				<f:render partial="Module/ListTable" arguments="{formSettings: formSettings, users: paginatedUsers, dateFormat: dateFormat, timeFormat: timeFormat, returnUrl: returnUrl}" />
			</f:widget.paginate>
		</div>
	</f:if>
	
</f:section>
